\usepackage{titletoc}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{fancybox}
\usepackage{graphicx}
\usepackage{parskip}
\usepackage{mathtools}
\usepackage{hyperref}
\usepackage{marvosym}
\usepackage{enumitem}
\usepackage{float}
\usepackage{comment}
\usepackage{calc}
\usepackage{longtable}
\usepackage{tabularx}
\usepackage{pdflscape}
\usepackage{extsizes}
\usepackage{color}
\usepackage{caption}
\usepackage{vwcol}
\usepackage{lipsum}
\usepackage{textcomp}


%sections
\renewcommand{\thesection}{\arabic{section}}

%set up code for boxes
\newenvironment{fminipage}
{\begin{Sbox}\begin{minipage}}
{\end{minipage}\end{Sbox}\fbox{\TheSbox}}

%headings
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}

%images
\graphicspath{ {images/} }
\newcommand{\graphics}[2]
{
	\begin{figure}[H]
		\centerline{\includegraphics[width=\textwidth]{#1}}
		\caption{#2}
	\end{figure}
}

% listings c#
\lstloadlanguages{
csh
}

\definecolor{bluekeywords}{rgb}{0,0,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.64,0.08,0.08}
\definecolor{xmlcomments}{rgb}{0.5,0.5,0.5}
\definecolor{types}{rgb}{0.17,0.57,0.68}

\lstset{
language=[Sharp]C,
captionpos=b,
%numbers=left, %Nummerierung
%numberstyle=\tiny, % kleine Zeilennummern
frame = lines, % Oberhalb und unterhalb des Listings ist eine Linie
showspaces=false,
showtabs=false,
breaklines=true,
showstringspaces=false,
breakatwhitespace=true,
escapeinside={(*@}{@*)},
commentstyle=\color{greencomments},
morekeywords={partial, var, value, get, set},
keywordstyle=\color{bluekeywords},
stringstyle=\color{redstrings},
basicstyle=\ttfamily\small,
}

%listings pseudocode
\newcounter{nalg}[chapter] % defines algorithm counter for chapter-level
\renewcommand{\thenalg}{\thechapter .\arabic{nalg}} %defines appearance of the algorithm counter
\DeclareCaptionLabelFormat{algocaption}{Algorithm \thenalg} % defines a new caption label as Algorithm x.y

\lstnewenvironment{algorithm}[1][] %defines the algorithm listing environment
{   
    \refstepcounter{nalg} %increments algorithm number
    \captionsetup{labelformat=algocaption,labelsep=colon} %defines the caption setup for: it ises label format as the declared caption label above and makes label and caption text to be separated by a ':'
    \lstset{ %this is the stype
        mathescape=true,
        frame=lines,
        numbers=left, 
        numberstyle=\tiny,
        basicstyle=\scriptsize, 
        keywordstyle=\color{black}\bfseries\em,
        keywords={,input, output, return, datatype, function, in, if, else, foreach, while, begin, end, } %add the keywords you want, or load a language as Rubens explains in his comment above.
        numbers=left,
        xleftmargin=.04\textwidth,
        #1 % this is to add specific settings to an usage of this environment (for instnce, the caption and referable label)
    }
}
{}